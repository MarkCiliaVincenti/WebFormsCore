!function(){"use strict";var e,t=11;function n(e,n){var r,a,i,o,c=n.attributes;if(n.nodeType!==t&&e.nodeType!==t){for(var u=c.length-1;u>=0;u--)a=(r=c[u]).name,i=r.namespaceURI,o=r.value,i?(a=r.localName||a,e.getAttributeNS(i,a)!==o&&("xmlns"===r.prefix&&(a=r.name),e.setAttributeNS(i,a,o))):e.getAttribute(a)!==o&&e.setAttribute(a,o);for(var s=e.attributes,d=s.length-1;d>=0;d--)a=(r=s[d]).name,(i=r.namespaceURI)?(a=r.localName||a,n.hasAttributeNS(i,a)||e.removeAttributeNS(i,a)):n.hasAttribute(a)||e.removeAttribute(a)}}var r="http://www.w3.org/1999/xhtml",a="undefined"==typeof document?void 0:document,i=!!a&&"content"in a.createElement("template"),o=!!a&&a.createRange&&"createContextualFragment"in a.createRange();function c(t){return t=t.trim(),i?function(e){var t=a.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(t):o?function(t){return e||(e=a.createRange()).selectNode(a.body),e.createContextualFragment(t).childNodes[0]}(t):function(e){var t=a.createElement("body");return t.innerHTML=e,t.childNodes[0]}(t)}function u(e,t){var n,r,a=e.nodeName,i=t.nodeName;return a===i||(n=a.charCodeAt(0),r=i.charCodeAt(0),n<=90&&r>=97?a===i.toUpperCase():r<=90&&n>=97&&i===a.toUpperCase())}function s(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var d={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}s(e,t,"selected")},INPUT:function(e,t){s(e,t,"checked"),s(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==n||!n&&a==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,a=-1,i=0,o=e.firstChild;o;)if("OPTGROUP"===(r=o.nodeName&&o.nodeName.toUpperCase()))o=(n=o).firstChild;else{if("OPTION"===r){if(o.hasAttribute("selected")){a=i;break}i++}!(o=o.nextSibling)&&n&&(o=n.nextSibling,n=null)}e.selectedIndex=a}}};function l(){}function f(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}const m=new Error("request for lock canceled");var h=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}u((r=r.apply(e,t||[])).next())}))};class v{constructor(e,t=m){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()}))}runExclusive(e,t=1){return h(this,void 0,void 0,(function*(){const[n,r]=yield this.acquire(t);try{return yield e(n)}finally{r()}}))}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()}))}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach((e=>e.forEach((e=>e.reject(this._cancelError))))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){const n=null===(e=this._weightedQueues[t-1])||void 0===e?void 0:e.shift();if(!n)continue;const r=this._value,a=t;this._value-=t,t=this._value+1,n.resolve([r,this._newReleaser(a)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach((e=>e())),this._weightedWaiters[e-1]=[])}}var p=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}u((r=r.apply(e,t||[])).next())}))};const b=function(e){return function(t,n,i){if(i||(i={}),"string"==typeof n)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var o=n;(n=a.createElement("html")).innerHTML=o}else n=c(n);else 11===n.nodeType&&(n=n.firstElementChild);var s=i.getNodeKey||f,m=i.onBeforeNodeAdded||l,h=i.onNodeAdded||l,v=i.onBeforeElUpdated||l,p=i.onElUpdated||l,b=i.onBeforeNodeDiscarded||l,w=i.onNodeDiscarded||l,g=i.onBeforeElChildrenUpdated||l,E=i.skipFromChildren||l,y=i.addChild||function(e,t){return e.appendChild(t)},N=!0===i.childrenOnly,A=Object.create(null),T=[];function C(e){T.push(e)}function _(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var r=void 0;t&&(r=s(n))?C(r):(w(n),n.firstChild&&_(n,t)),n=n.nextSibling}}function S(e,t,n){!1!==b(e)&&(t&&t.removeChild(e),w(e),_(e,n))}function x(e){h(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=s(t);if(r){var a=A[r];a&&u(t,a)?(t.parentNode.replaceChild(a,t),L(a,t)):x(t)}else x(t);t=n}}function L(t,n,r){var i=s(n);if(i&&delete A[i],!r){if(!1===v(t,n))return;if(e(t,n),p(t),!1===g(t,n))return}"TEXTAREA"!==t.nodeName?function(e,t){var n,r,i,o,c,l=E(e),f=t.firstChild,h=e.firstChild;e:for(;f;){for(o=f.nextSibling,n=s(f);!l&&h;){if(i=h.nextSibling,f.isSameNode&&f.isSameNode(h)){f=o,h=i;continue e}r=s(h);var v=h.nodeType,p=void 0;if(v===f.nodeType&&(1===v?(n?n!==r&&((c=A[n])?i===c?p=!1:(e.insertBefore(c,h),r?C(r):S(h,e,!0),h=c):p=!1):r&&(p=!1),(p=!1!==p&&u(h,f))&&L(h,f)):3!==v&&8!=v||(p=!0,h.nodeValue!==f.nodeValue&&(h.nodeValue=f.nodeValue))),p){f=o,h=i;continue e}r?C(r):S(h,e,!0),h=i}if(n&&(c=A[n])&&u(c,f))l||y(e,c),L(c,f);else{var b=m(f);!1!==b&&(b&&(f=b),f.actualize&&(f=f.actualize(e.ownerDocument||a)),y(e,f),x(f))}f=o,h=i}!function(e,t,n){for(;t;){var r=t.nextSibling;(n=s(t))?C(n):S(t,e,!0),t=r}}(e,h,r);var w=d[e.nodeName];w&&w(e,t)}(t,n):d.TEXTAREA(t,n)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var r=s(n);r&&(A[r]=n),e(n),n=n.nextSibling}}(t);var U,k,D=t,O=D.nodeType,q=n.nodeType;if(!N)if(1===O)1===q?u(t,n)||(w(t),D=function(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}(t,(U=n.nodeName,(k=n.namespaceURI)&&k!==r?a.createElementNS(k,U):a.createElement(U)))):D=n;else if(3===O||8===O){if(q===O)return D.nodeValue!==n.nodeValue&&(D.nodeValue=n.nodeValue),D;D=n}if(D===n)w(t);else{if(n.isSameNode&&n.isSameNode(D))return;if(L(D,n,N),T)for(var P=0,R=T.length;P<R;P++){var I=A[T[P]];I&&S(I,I.parentNode,!1)}}return!N&&D!==t&&t.parentNode&&(D.actualize&&(D=D.actualize(t.ownerDocument||a)),t.parentNode.replaceChild(D,t)),D}}(n),w=new class{constructor(e){this._semaphore=new v(1,e)}acquire(){return p(this,void 0,void 0,(function*(){const[,e]=yield this._semaphore.acquire();return e}))}runExclusive(e){return this._semaphore.runExclusive((()=>e()))}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};class g{constructor(e,t){this.element=e,this.formData=t}querySelector(e){if(this.element){const t=this.element.querySelector(e);if(t)return t}return document.body.closest(":not([data-wfc-form]) "+e)}querySelectorAll(e){const t=document.body.querySelectorAll(":not([data-wfc-form]) "+e);return this.element?[...this.element.querySelectorAll(e),...t]:Array.from(t)}addInputs(e){const t=this.querySelectorAll(e);for(let e=0;e<t.length;e++){E(t[e],this.formData)}}}function E(e,t){"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):t.append(e.name,e.value)}function y(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}function N(e){return e.closest("[data-wfc-form]")}function A(e,t,n){const r=[];for(const e of t.querySelectorAll("input, select, textarea"))e.closest("[data-wfc-ignore]")||r.push(e);document.dispatchEvent(new CustomEvent("wfc:addInputs",{detail:{elements:r}}));for(let t=0;t<r.length;t++){const a=r[t];a.hasAttribute("data-wfc-ignore")||"button"===a.type||"submit"===a.type||"reset"===a.type||(a.closest("[data-wfc-ignore]")||!n&&N(a)||E(a,e))}}async function T(e,t,r){const a=await w.acquire();try{const a=location.pathname+location.search;let i;e?"FORM"===e.tagName?i=new FormData(e):(i=new FormData,A(i,e,!0)):i=new FormData,A(i,document.body,!1),t&&i.append("wfcTarget",t),r&&i.append("wfcArgument",r);const o=new g(e,i);document.dispatchEvent(new CustomEvent("wfc:beforeSubmit",{detail:{container:o,eventTarget:t}}));const c={method:"POST"};c.body=function(e){const t=document.body.querySelectorAll('input[type="file"]');for(let e=0;e<t.length;e++)if(t[e].files.length>0)return!0;return!1}(document.body)?i:new URLSearchParams(i);const u=await fetch(a,c);if(!u.ok)throw document.dispatchEvent(new CustomEvent("wfc:submitError",{detail:{form:e,eventTarget:t,response:u}})),new Error(u.statusText);const s=await u.text(),d=[],l={onNodeAdded(n){d.push(n),document.dispatchEvent(new CustomEvent("wfc:addNode",{detail:{node:n,form:e,eventTarget:t}})),n.nodeType===Node.ELEMENT_NODE&&document.dispatchEvent(new CustomEvent("wfc:addElement",{detail:{element:n,form:e,eventTarget:t}}))},onBeforeElUpdated:function(r,a){return!!r.dispatchEvent(new CustomEvent("wfc:beforeUpdateNode",{cancelable:!0,bubbles:!0,detail:{node:r,source:a,form:e,eventTarget:t}}))&&(!(r.nodeType===Node.ELEMENT_NODE&&!r.dispatchEvent(new CustomEvent("wfc:beforeUpdateElement",{cancelable:!0,bubbles:!0,detail:{element:r,source:a,form:e,eventTarget:t}})))&&(!r.hasAttribute("data-wfc-ignore")&&!a.hasAttribute("data-wfc-ignore")&&("INPUT"===r.tagName&&"hidden"!==r.type?(n(r,a),y(r,a,"checked"),y(r,a,"disabled"),a.hasAttribute("value")&&(r.value=a.value),!1):void 0)))},onElUpdated(n){n.nodeType===Node.ELEMENT_NODE&&n.dispatchEvent(new CustomEvent("wfc:updateElement",{bubbles:!0,detail:{element:n,form:e,eventTarget:t}}))},onBeforeNodeDiscarded(n){var r,a;return!("SCRIPT"===n.tagName||"STYLE"===n.tagName||"LINK"===n.tagName&&n.hasAttribute("rel")&&"stylesheet"===n.getAttribute("rel"))&&(("FORM"!==n.tagName||!n.hasAttribute("data-wfc-form"))&&(("DIV"!==n.tagName||!n.hasAttribute("data-wfc-owner")||(null!==(r=n.getAttribute("data-wfc-owner"))&&void 0!==r?r:"")===(null!==(a=null==e?void 0:e.id)&&void 0!==a?a:""))&&(!!n.dispatchEvent(new CustomEvent("wfc:discardNode",{bubbles:!0,cancelable:!0,detail:{node:n,form:e,eventTarget:t}}))&&(!(n.nodeType===Node.ELEMENT_NODE&&!n.dispatchEvent(new CustomEvent("wfc:discardElement",{bubbles:!0,cancelable:!0,detail:{element:n,form:e,eventTarget:t}})))&&void 0))))}},f=(new DOMParser).parseFromString(s,"text/html");b(document.head,f.querySelector("head"),l),b(document.body,f.querySelector("body"),l),document.dispatchEvent(new CustomEvent("wfc:afterSubmit",{detail:{container:o,form:e,eventTarget:t,newElements:d}}))}finally{a()}}const C=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=async function(){this.hasAttribute("data-wfc-form")?await T(this):C.call(this)},document.addEventListener("submit",(async function(e){e.target instanceof Element&&e.target.hasAttribute("data-wfc-form")&&(e.preventDefault(),await T(e.target))})),document.addEventListener("click",(async function(e){var t,n;if(!(e.target instanceof Element))return;const r=null===(n=null===(t=e.target)||void 0===t?void 0:t.closest("[data-wfc-postback]"))||void 0===n?void 0:n.getAttribute("data-wfc-postback");if(!r)return;const a=N(e.target);e.preventDefault(),await T(a,r)})),document.addEventListener("keypress",(async function(e){if("Enter"!==e.key&&13!==e.keyCode&&13!==e.which)return;if(!(e.target instanceof Element)||"INPUT"!==e.target.tagName)return;const t=e.target.getAttribute("type");if("button"===t||"submit"===t||"reset"===t)return;const n=N(e.target),r=e.target.getAttribute("name");e.preventDefault(),await T(n,r,"ENTER")}));const _={};function S(e,t=1e3,n="CHANGE"){var r;const a=N(e),i=e.getAttribute("name"),o=(null!==(r=null==a?void 0:a.id)&&void 0!==r?r:"")+i+n;_[o]&&clearTimeout(_[o]),_[o]=setTimeout((async()=>{delete _[o],await T(a,i,n)}),t)}document.addEventListener("input",(function(e){if(!(e.target instanceof Element&&"INPUT"===e.target.tagName&&e.target.hasAttribute("data-wfc-autopostback")))return;const t=e.target.getAttribute("type");"button"!==t&&"submit"!==t&&"reset"!==t&&S(e.target)})),document.addEventListener("change",(async function(e){var t;if(e.target instanceof Element&&e.target.hasAttribute("data-wfc-autopostback")){const n=e.target.getAttribute("name"),r=N(e.target),a=(null!==(t=null==r?void 0:r.id)&&void 0!==t?t:"")+n;_[a]&&clearTimeout(_[a]),setTimeout((()=>T(r,n,"CHANGE")),10)}})),window.WebFormsCore={postBackChange:S,postBack:function(e,t){return T(N(e),e.getAttribute("name"),t)},bind:function(e,t){var n,r;const a=null!==(n=t.init)&&void 0!==n?n:function(){},i=null!==(r=t.update)&&void 0!==r?r:function(){},o=t.submit,c=t.destroy;for(const t of document.querySelectorAll(e))a(t),i(t,t);document.addEventListener("wfc:addElement",(function(t){const{element:n}=t.detail;n.matches(e)&&(a(n),i(n,n))})),document.addEventListener("wfc:beforeUpdateElement",(function(t){const{element:n,source:r}=t.detail;n.matches(e)&&i(n,r)&&t.preventDefault()})),o&&document.addEventListener("wfc:beforeSubmit",(function(t){const{container:n}=t.detail;for(const t of n.querySelectorAll(e))o(t,n.formData)})),c&&document.addEventListener("wfc:discardElement",(function(t){const{element:n}=t.detail;n.matches(e)&&(c(n),t.preventDefault())}))}}}();
